# hidetaka.dev UX/IA改善計画（コード調査ベース）

## 調査結果サマリー

コードベースを調査した結果、レポートで指摘された課題の一部は既に実装済みであることが判明しました。以下、現実的な改善計画を提示します。

---

## 1. 最優先課題：問い合わせ・登壇依頼導線の欠如

### 現状確認
- ✅ **コンタクトページ**: 存在しない（`/contact` または `/ja/contact` のルートなし）
- ✅ **ナビゲーション**: Header/Footerにコンタクトリンクなし
- ✅ **Speakingページ**: 登壇依頼へのCTAなし
- ✅ **Aboutページ**: 問い合わせ導線なし（SNSリンクのみ）

### 実装計画

#### 1.1 コンタクトページの新設（優先度：最高）

**実装内容：**
- `/contact` と `/ja/contact` の2つのページを作成
- 問い合わせフォーム（外部サービス連携またはシンプルなメールリンク）
- 対応可能なサービス内容の明記

**技術的実装：**
```typescript
// src/app/contact/page.tsx
// src/app/ja/contact/page.tsx
// src/components/containers/pages/ContactPage.tsx
```

**推奨アプローチ：**
1. **短期（即座）**: メールリンク（`mailto:`）とSNSリンクを明示的に表示
2. **中期（1-2週間）**: GoogleフォームまたはTally等の外部フォームサービスを埋め込み
3. **長期（将来）**: 自前のフォームAPI（Next.js API Route + メール送信サービス）

**必要なファイル：**
- `src/app/contact/page.tsx`（新規）
- `src/app/ja/contact/page.tsx`（新規）
- `src/components/containers/pages/ContactPage.tsx`（新規）
- `src/components/tailwindui/Header.tsx`（修正：ナビゲーション追加）
- `src/components/tailwindui/Footer.tsx`（修正：リンク追加）

#### 1.2 ナビゲーションへの追加（優先度：最高）

**実装内容：**
- Headerのナビゲーションに「Contact」を追加
- Footerのナビゲーションにも追加
- 日本語版では「お問い合わせ」と表示

**修正ファイル：**
- `src/components/tailwindui/Header.tsx`（113-120行目、227-234行目の`navItems`配列に追加）
- `src/components/tailwindui/Footer.tsx`（97-107行目のナビゲーションに追加）

**実装例：**
```typescript
const navItems = [
  { path: 'about', label: lang === 'ja' ? 'About' : 'About' },
  { path: 'work', label: lang === 'ja' ? '制作物' : 'Work' },
  { path: 'writing', label: lang === 'ja' ? 'Writing' : 'Writing' },
  { path: 'blog', label: lang === 'ja' ? 'ブログ' : 'Blog' },
  { path: 'news', label: lang === 'ja' ? 'News' : 'News' },
  { path: 'speaking', label: lang === 'ja' ? 'Speaking' : 'Speaking' },
  { path: 'contact', label: lang === 'ja' ? 'お問い合わせ' : 'Contact' }, // 追加
]
```

#### 1.3 Speakingページへの登壇依頼CTA追加（優先度：最高）

**実装内容：**
- Speakingページの上部または下部に「登壇依頼はこちら」セクションを追加
- 対応可能なトピック一覧を表示
- コンタクトページへのリンクを設置

**修正ファイル：**
- `src/components/containers/pages/SpeakingPage.tsx`（新規セクション追加）

**実装位置：**
- PageHeaderの下、またはイベントグリッドの下にCTAセクションを追加

**推奨コンテンツ：**
- 対応可能なトピック：Stripe、AWS Serverless、WordPress、SaaS収益最大化など
- 対応形式：カンファレンス、勉強会、企業内勉強会など

#### 1.4 フッターCTAの強化（優先度：高）

**実装内容：**
- Footerに「ご相談・お問い合わせはお気軽に」セクションを追加
- コンタクトページへのリンクボタンを設置

**修正ファイル：**
- `src/components/tailwindui/Footer.tsx`（新規セクション追加）

---

## 2. ブログ機能の発見性向上

### 現状確認
- ✅ **Blogページ**: ページネーション実装済み（`Pagination`コンポーネント使用）
- ❌ **Blogページ**: 検索機能なし（WritingページとSpeakingページには実装済み）
- ✅ **Blogページ**: カテゴリフィルター実装済み
- ✅ **Writingページ**: 検索機能実装済み、データソースフィルター実装済み
- ❌ **Writingページ**: ページネーションなし（最新20件のみ表示）

### 実装計画

#### 2.1 Blogページへの検索機能追加（優先度：高）

**実装内容：**
- WritingページとSpeakingページで使用されている`SearchBar`コンポーネントをBlogページにも追加
- クライアントサイドでの検索フィルタリングを実装

**技術的実装：**
- `src/components/containers/pages/BlogPage.tsx`を`'use client'`に変更、または検索機能を別コンポーネントとして分離
- `SearchBar`コンポーネントをインポートして使用
- 検索クエリに基づいて記事をフィルタリング

**注意点：**
- 現在のBlogPageはサーバーコンポーネントのため、検索機能を追加する場合はクライアントコンポーネント化が必要
- または、検索機能を別のクライアントコンポーネントとして分離し、親コンポーネントから渡されたデータをフィルタリング

**修正ファイル：**
- `src/components/containers/pages/BlogPage.tsx`（検索機能追加）

#### 2.2 Writingページへのページネーション追加（優先度：高）

**現状の問題：**
- `loadBlogPosts`関数は最新20件のみを返す
- 各データソース（Qiita、Zenn、Dev.to等）から20件ずつ取得しているが、ページネーション機能がない

**実装内容：**
- Writingページにページネーション機能を追加
- ただし、複数データソースを統合しているため、実装が複雑

**技術的課題：**
- 各データソース（Qiita、Zenn、Dev.to、WordPress等）のAPIがページネーションをサポートしているか確認が必要
- 統合された記事リストのページネーションは、全データソースから取得した後にソートしてページ分割する必要がある

**推奨アプローチ：**
1. **短期**: 「もっと記事を見る」セクションを強化し、各データソースへのリンクを明確化（既に実装済み）
2. **中期**: 無限スクロール機能の実装（クライアントサイドで追加データを読み込む）
3. **長期**: サーバーサイドでのページネーション実装（各データソースのAPIを活用）

**修正ファイル：**
- `src/libs/dataSources/blogs.ts`（ページネーション対応）
- `src/components/containers/pages/WritingPage.tsx`（ページネーションUI追加）

#### 2.3 技術タグシステムの導入（優先度：中）

**現状確認：**
- Blogページにはカテゴリフィルターが実装済み
- Writingページにはデータソースフィルターが実装済み
- 技術タグ（Stripe、AWS、WordPress等）によるフィルタリングは未実装

**実装内容：**
- 記事のタイトル・説明文から技術キーワードを抽出してタグ化
- または、各データソースのAPIからタグ情報を取得（可能な場合）

**技術的実装：**
- 記事のメタデータに技術タグを追加
- `FeedItem`型に`tags`フィールドを追加
- フィルターUIを追加

**修正ファイル：**
- `src/libs/dataSources/types.ts`（`tags`フィールド追加）
- `src/components/containers/pages/WritingPage.tsx`（タグフィルター追加）
- `src/components/containers/pages/BlogPage.tsx`（タグフィルター追加）

---

## 3. HTML表示の問題

### 現状確認
- ✅ `removeHtmlTags`関数が実装済み（`src/libs/sanitize.ts`）
- ✅ Writingページで`removeHtmlTags`を使用してHTMLタグを除去
- ✅ Blogページでも`removeHtmlTags`を使用している可能性が高い

**結論：**
レポートで指摘された「抜粋文に生の`<p>`タグが残っている」問題は、コード上では既に解決されている可能性が高いです。ただし、実際の表示を確認する必要があります。

**確認方法：**
- 実際のサイトを確認して、HTMLタグが表示されているかチェック
- もし問題があれば、`removeHtmlTags`の呼び出し漏れを確認

**修正ファイル（必要に応じて）：**
- 各コンポーネントで`removeHtmlTags`が適切に使用されているか確認

---

## 4. 有料コンテンツ販売に向けた構造的考察

### 現状確認
- ✅ MicroCMSを使用したコンテンツ管理
- ✅ Next.js 16 App Router（サーバーコンポーネント対応）
- ✅ Stripe専門性があるため、Stripe連携は技術的に可能

### 実装計画（将来対応）

#### 4.1 認証システムの導入

**推奨技術スタック：**
- **Clerk**: 認証とBilling機能を統合（推奨）
- **NextAuth.js**: より細かい制御が必要な場合
- **Stripe Customer Portal**: 会員管理とサブスクリプション管理

**実装内容：**
- ユーザー認証機能
- 会員登録・ログイン機能
- サブスクリプション管理

#### 4.2 ペイウォール機能の実装

**実装内容：**
- MicroCMSのコンテンツに`isPaid`フラグを追加
- 認証状態に基づいてコンテンツの表示を制御
- Stripe CheckoutまたはPayment Linksで決済フローを実装

**技術的実装：**
- `src/libs/microCMS/types.ts`に`isPaid`フィールドを追加
- ページコンポーネントで認証状態をチェック
- 有料コンテンツの場合は決済ページへリダイレクト

#### 4.3 Premiumセクションの新設

**実装内容：**
- ナビゲーションに「Premium」セクションを追加
- 有料コンテンツ専用のページを作成
- 無料コンテンツとの視覚的区別（🔒アイコン、バッジ等）

---

## 改善計画の優先順位まとめ

### フェーズ1：最優先（即座に対応）
1. ✅ **コンタクトページの新設**
   - 実装工数：4-6時間
   - 影響度：最高
   - 技術的難易度：低

2. ✅ **ナビゲーションへのContact追加**
   - 実装工数：1時間
   - 影響度：最高
   - 技術的難易度：低

3. ✅ **Speakingページへの登壇依頼CTA追加**
   - 実装工数：2-3時間
   - 影響度：最高
   - 技術的難易度：低

4. ✅ **フッターCTAの強化**
   - 実装工数：1-2時間
   - 影響度：高
   - 技術的難易度：低

### フェーズ2：高優先度（早期に対応）
5. ✅ **Blogページへの検索機能追加**
   - 実装工数：3-4時間
   - 影響度：高
   - 技術的難易度：中

6. ✅ **Writingページへのページネーション追加**
   - 実装工数：6-8時間（無限スクロールの場合）
   - 影響度：高
   - 技術的難易度：中〜高

7. ✅ **HTML表示問題の確認と修正**
   - 実装工数：1-2時間（確認のみ）
   - 影響度：中
   - 技術的難易度：低

### フェーズ3：中優先度（段階的に対応）
8. ✅ **技術タグシステムの導入**
   - 実装工数：8-12時間
   - 影響度：中
   - 技術的難易度：中

9. ✅ **関連記事機能の強化**
   - 実装工数：4-6時間
   - 影響度：中
   - 技術的難易度：低（既に関連記事機能は実装済み）

### フェーズ4：将来対応（有料化検討時）
10. ✅ **会員認証システムの導入**
    - 実装工数：20-30時間
    - 影響度：将来
    - 技術的難易度：高

11. ✅ **ペイウォール機能の実装**
    - 実装工数：15-20時間
    - 影響度：将来
    - 技術的難易度：中〜高

12. ✅ **Premiumセクションの新設**
    - 実装工数：8-12時間
    - 影響度：将来
    - 技術的難易度：中

---

## 実装時の注意点

### コードベースの特徴
- **Next.js 16 App Router**: サーバーコンポーネントを優先
- **TypeScript strict mode**: 型安全性を重視
- **Biome**: リンター/フォーマッターとして使用
- **TailwindCSS**: ユーティリティファーストのスタイリング
- **多言語対応**: `/ja/`プレフィックスによる日本語版

### 実装ガイドライン
1. **既存コンポーネントの再利用**: `SearchBar`、`Pagination`、`FilterItem`等の既存コンポーネントを活用
2. **型安全性**: すべての新規コードにTypeScript型定義を追加
3. **多言語対応**: 日本語と英語の両方のテキストを用意
4. **アクセシビリティ**: セマンティックHTMLとARIA属性を使用
5. **レスポンシブデザイン**: モバイル・タブレット・デスクトップに対応

### テスト要件
- `npm run lint`: Biomeリンターのチェック
- `npm run build`: TypeScriptコンパイルの確認
- 実際のブラウザでの動作確認（特にモバイル）

---

## 結論

レポートで指摘された課題の多くは、コードベースの調査により**実装可能で、技術的難易度も中程度以下**であることが確認できました。特に最優先課題である「問い合わせ・登壇依頼導線の追加」は、**実装工数が少なく、影響度が高い**ため、即座に対応することを強く推奨します。

既存のコードベースは**よく構造化されており、コンポーネントの再利用が容易**です。WritingページやSpeakingページで実装されている検索・フィルター機能を参考にすることで、Blogページへの機能追加もスムーズに進められるでしょう。
