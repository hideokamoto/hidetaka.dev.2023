# ナビゲーション再設計レポート検証結果

**検証日:** 2026-02-16
**検証方法:** ソースコード解析による事実検証
**対象コミット:** Header.tsx, Footer.tsx, middleware.ts, 全データソース, 全ページルート

---

## 前回検証からの訂正

前回の検証で「Newsはナビに存在しない」と記載したが、これは**誤り**。
`Header.tsx:33` に `{ path: 'news', label: 'ニュース' / 'News' }` が定義されており、**Newsはナビに存在する**。

`jaOnly: true` が付与されているのは **Blogのみ** であり、Newsには付与されていない。

---

## 1. 正確なナビゲーション構造

### Header.tsx（28-37行目）の定義

```typescript
const allNavItems: NavItem[] = [
  { path: 'about',    label: 'About' },
  { path: 'work',     label: 'Work' },
  { path: 'writing',  label: 'Writing' },
  { path: 'blog',     label: 'Blog',    jaOnly: true },  // ← 日本語のみ
  { path: 'news',     label: 'News' },
  { path: 'speaking', label: 'Speaking' },
]
// フィルタ: allNavItems.filter(item => !item.jaOnly || lang === 'ja')
```

### 言語別の実際の表示

| 言語 | ナビ項目 | 数 |
|------|---------|---|
| **日本語** | 概要 / 制作物 / 執筆 / ブログ / ニュース / 登壇 | **6** |
| **英語** | About / Work / Writing / News / Speaking | **5** |

### フッター（Footer.tsx）

About / Work / Writing / Blog / Speaking / Privacy Policy（**言語による出し分けなし、Newsなし**）

**レポートの「6セクション」は日本語版で正確。英語版は5つ。**

---

## 2. レポートの事実検証

### 正確だった点

| 主張 | 判定 |
|------|------|
| About: 自己紹介・経歴・スキル | ✅ 正確（静的、API呼び出しなし） |
| Work: プロジェクト・OSS・書籍が混在 | ✅ 正確（microCMS + npm + WP.org） |
| Blog: 個人的な記事（日本語中心） | ✅ 正確（WP `thoughs`、英語は空配列を即返却） |
| News: 製品リリース情報 | ✅ 正確（WP `products`カスタム投稿） |
| Speaking: 登壇実績 | ✅ 正確（WP `events`カスタム投稿） |
| セクション間の区別がつきにくい | ✅ ユーザー視点では妥当 |

### 不正確・不完全だった点

| 主張 | 実際 | 重大度 |
|------|------|--------|
| Writing = 技術記事 | Writing = **6つの外部プラットフォームからの記事アグリゲーター**（WP Kyoto, Zenn, Qiita, Dev.to, Stripe.dev, Dev Notes） | 中 |
| Writing と Blog の違いが不明確 | 技術的には完全に別物（後述） | 中 |
| Work に「Revtrona製品」が含まれる | コード上にRevtronaへの参照なし（CMSデータの可能性はあるが未確認） | 低 |

---

## 3. Writing vs Blog: レポートが見落とした本質的な違い

レポートは「Writingは技術記事」「Blogは個人記事」と分類したが、実態はもっと根本的に異なる。

| 観点 | Writing | Blog |
|------|---------|------|
| **本質** | 外部記事リンク集 | 内部コンテンツ |
| **データソース** | 6つの外部API/RSS集約 | WordPress 1つ |
| **閲覧体験** | 外部サイトへ遷移 | サイト内で全文閲覧 |
| **英語コンテンツ** | Stripe.dev(5件) + Dev.to + WP EN | **なし**（コードで即空配列返却） |
| **ISR** | 1時間 | 30分 |
| **フィルター** | データソース別 | WordPressカテゴリ別 |
| **ページネーション** | なし（最新20件表示） | あり（20件/ページ） |
| **検索** | あり | なし |
| **型** | `FeedItem`（dataSource付き） | `BlogItem`（categories付き） |

**ユーザーにとっての混乱は「WritingとBlogという名前から違いが分からない」であり、統合よりも命名の問題。**

---

## 4. レポートが見落としていた重要な事実

### 4-1. 既存リダイレクト構造

```
/projects     → /work          （レガシー）
/oss          → /work          （レガシー）
/articles     → /writing       （レガシー）
/writing/[id] → /news/         （dev-notes以外、microCMS廃止移行）
/ja-JP/*      → /ja/*          （i18n正規化）
```

案Aで `/articles` をメインURLにする場合、**既存の `/articles` → `/writing` リダイレクトを逆転させる必要がある**。

### 4-2. Dev Notesサブセクション

`/writing/dev-notes/` は Writing の中の独立サブセクション。リダイレクトルールで明示的に除外されている（`DevNotesExclusionRedirectRule`）。統合時にこの扱いが必要。

### 4-3. ナビとフッターの不整合

- **Header:** News あり / Blog は日本語のみ / Privacy なし
- **Footer:** News **なし** / Blog 常時表示 / Privacy あり

### 4-4. Speaking詳細ページのパス不統一

- 英語: `/event-reports/[slug]`
- 日本語: `/ja/events/[slug]`

---

## 5. レポートの本質: 何を解決すべきか

レポートの数値や分類に誤りはあったが、**指摘している問題の本質は正しい**:

> **訪問者がナビを見て「自分の欲しい情報がどこにあるか」直感的に分からない**

これは3つの問題に分解できる:

### 問題A: ラベルの不透明性

「Writing」と「Blog」という名前から、一方が外部記事リンク集で他方が内部ブログだとは分からない。

### 問題B: 日英の非対称性

- Blog は日本語のみ（英語では空ページ）なのに、フッターでは英語でもリンクが出る
- Writing の英語版はStripe.dev 5件 + Dev.to + WP ENのみで薄い

### 問題C: 項目数の限界付近

日本語で6項目。Miller's Lawの7±2の範囲内だが、「各項目の違いが名前から分かりにくい」場合は認知負荷が項目数以上に高くなる。

---

## 6. 提言: コード実態に基づく改善案

### 第1段階: 低コスト・高効果（ラベル改善）

**ナビ構造を変えずにラベルで意味を明確化する。**

| 現在 | 変更案(EN) | 変更案(JA) | 理由 |
|------|-----------|-----------|------|
| Writing | Publications | 寄稿・外部記事 | 外部プラットフォームへの寄稿であることを明示 |
| Blog | Journal | 日記・考察 | 個人の思考記録であることを明示 |
| News | Product Updates | 製品アップデート | 何のニュースか明確化 |
| Work | Projects | プロジェクト | より一般的で直感的 |

**コスト:** Header.tsx と Footer.tsx のラベル文字列変更のみ。ルーティング変更不要。

### 第2段階: 中コスト・中効果（構造スリム化）

```
グローバルナビ（日本語）: 概要 / プロジェクト / 執筆・外部記事 / ブログ
グローバルナビ（英語）:   About / Projects / Publications
```

変更内容:
1. **Speaking → フッターへ移動**（Header.tsxからリンク削除、フッターに既にある）
2. **News → フッターへ移動**（アクセス頻度が低い製品更新情報）
3. ナビ項目数: 日本語 6→4、英語 5→3

**コスト:** Header.tsx のnavItems配列変更 + Footer.tsxにNews追加。ルーティング変更不要。

### 第3段階: 高コスト・高効果（Writing + Blog統合）

Writing（`FeedItem`）とBlog（`BlogItem`）の統合。

**必要な作業:**
1. 統一型の設計（`FeedItem` にカテゴリ対応を追加、または union型）
2. 内部記事と外部リンクの閲覧体験の共存UI
3. データソースフィルター + カテゴリフィルターの統合
4. ページネーション戦略（外部記事にはページネーション概念なし）
5. `/articles` → `/writing` リダイレクトの逆転
6. Dev Notes サブセクションの移行
7. 英語版のBlog空ページ問題の解消

**推奨: 第1段階から始め、効果を確認してから第2・第3段階に進む。**

---

## 7. 結論

| 観点 | 評価 |
|------|------|
| レポートの問題意識 | **正当** — ナビの分かりにくさは実在する |
| レポートの現状分析 | **概ね正確** — 日本語6項目、英語5項目（Blog がjaOnly） |
| レポートの案A | **方向性は妥当だが実装コストの見積りが不足** |
| 最も効果的な最初の一手 | **ラベル改善**（コスト最小、効果即時） |
| 統合（Writing + Blog）の要否 | **要検討** — 技術的には別物で、無理に統合するとUXが複雑化するリスク |
